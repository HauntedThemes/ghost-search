{"version":3,"sources":["ghost-search.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","_createClass","protoProps","staticProps","root","UMD","define","amd","module","exports","fuzzysort","this","isNode","require","window","preparedCache","Map","preparedSearchCache","noResults","total","matchesSimple","matchesStrict","cleanup","clear","defaultScoreFn","a","max","result","score","getValue","prop","tmp","undefined","segs","Array","isArray","split","len","isObj","x","fastpriorityqueue","r","o","e","n","c","f","add","poll","peek","replaceTop","q","fuzzysortNew","instanceOptions","single","search","options","getPreparedSearch","getPrepared","allowTypo","algorithm","algorithmNoTypo","go","targets","searchLowerCode","prepareSearch","threshold","limit","resultsLen","limitedCount","targetsLen","keys","scoreFn","keysLen","objResults","keyI","_targetLowerCodes","_nextBeginningIndexes","indexes","results","goAsync","canceled","p","Promise","resolve","reject","iCurrent","step","startMs","Date","now","setImmediate","setTimeout","cancel","highlight","hOpen","hClose","highlighted","matchesIndex","opened","targetLen","matchesBest","char","substr","prepare","prepareLowerCodes","prepareSlow","prepareNextBeginningIndexes","targetPrepared","get","set","searchPrepared","searchLowerCodes","prepared","targetLowerCodes","searchLen","searchI","targetI","typoSimpleI","matchesSimpleLen","typoStrictI","successStrict","matchesStrictLen","nextBeginningIndexes","firstPossibleI","matchesBestLen","lastTargetI","str","strLen","lowerCodes","lower","toLowerCase","charCodeAt","prepareBeginningIndexes","beginningIndexes","beginningIndexesLen","wasUpper","wasAlphanum","targetCode","isUpper","isAlphanum","isBeginning","lastIsBeginning","lastIsBeginningI","new","GhostSearch","args","check","defaults","url","version","input","button","defaultValue","template","location","protocol","join","slug","title","trigger","api","resource","parameters","fields","filter","include","order","formats","page","on","beforeDisplay","afterDisplay","beforeFetch","afterFetch","merged","mergeDeep","assign","init","source","_this","forEach","_this2","ghostAPI","GhostContentAPI","browse","then","data","err","console","error","htmlString","div","document","createElement","innerHTML","trim","firstChild","querySelectorAll","removeChild","inputValue","appendChild","createElementFromHTML","_this3","displayResults","tagName","type","closest","addEventListener","preventDefault","log","checkArgs","_this4","validate","onload","fetch"],"mappings":"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","sourcesContent":["'use strict';\n/**\r\n * @requires ../node_modules/fuzzysort/fuzzysort.js\r\n */\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar GhostSearch =\n/*#__PURE__*/\nfunction () {\n  function GhostSearch(args) {\n    _classCallCheck(this, GhostSearch);\n\n    this.check = false;\n    var defaults = {\n      url: '',\n      key: '',\n      version: 'v3',\n      input: '#ghost-search-field',\n      results: '#ghost-search-results',\n      button: '',\n      defaultValue: '',\n      template: function template(result) {\n        var url = [location.protocol, '//', location.url].join('');\n        return '<a href=\"' + url + '/' + result.slug + '/\">' + result.title + '</a>';\n      },\n      trigger: 'focus',\n      options: {\n        keys: ['title'],\n        limit: 10,\n        threshold: -3500,\n        allowTypo: false\n      },\n      api: {\n        resource: 'posts',\n        parameters: {\n          limit: 'all',\n          fields: ['title', 'slug'],\n          filter: '',\n          include: '',\n          order: '',\n          formats: '',\n          page: ''\n        }\n      },\n      on: {\n        beforeDisplay: function beforeDisplay() {},\n        afterDisplay: function afterDisplay(results) {},\n        beforeFetch: function beforeFetch() {},\n        afterFetch: function afterFetch(results) {}\n      }\n    };\n    var merged = this.mergeDeep(defaults, args);\n    Object.assign(this, merged);\n    this.init();\n  }\n\n  _createClass(GhostSearch, [{\n    key: \"mergeDeep\",\n    value: function mergeDeep(target, source) {\n      var _this = this;\n\n      if (target && _typeof(target) === 'object' && !Array.isArray(target) && target !== null && source && _typeof(source) === 'object' && !Array.isArray(source) && source !== null) {\n        Object.keys(source).forEach(function (key) {\n          if (source[key] && _typeof(source[key]) === 'object' && !Array.isArray(source[key]) && source[key] !== null) {\n            if (!target[key]) Object.assign(target, _defineProperty({}, key, {}));\n\n            _this.mergeDeep(target[key], source[key]);\n          } else {\n            Object.assign(target, _defineProperty({}, key, source[key]));\n          }\n        });\n      }\n\n      return target;\n    }\n  }, {\n    key: \"fetch\",\n    value: function fetch() {\n      var _this2 = this;\n\n      this.on.beforeFetch();\n      var ghostAPI = new GhostContentAPI({\n        url: this.url,\n        key: this.key,\n        version: this.version\n      });\n      var browse = {};\n      var parameters = this.api.parameters;\n\n      for (var key in parameters) {\n        if (parameters[key] != '') {\n          browse[key] = parameters[key];\n        }\n      }\n\n      ghostAPI[this.api.resource].browse(browse).then(function (data) {\n        _this2.search(data);\n      })[\"catch\"](function (err) {\n        console.error(err);\n      });\n    }\n  }, {\n    key: \"createElementFromHTML\",\n    value: function createElementFromHTML(htmlString) {\n      var div = document.createElement('div');\n      div.innerHTML = htmlString.trim();\n      return div.firstChild;\n    }\n  }, {\n    key: \"displayResults\",\n    value: function displayResults(data) {\n      if (document.querySelectorAll(this.results)[0].firstChild !== null && document.querySelectorAll(this.results)[0].firstChild !== '') {\n        while (document.querySelectorAll(this.results)[0].firstChild) {\n          document.querySelectorAll(this.results)[0].removeChild(document.querySelectorAll(this.results)[0].firstChild);\n        }\n      }\n\n      ;\n      var inputValue = document.querySelectorAll(this.input)[0].value;\n\n      if (this.defaultValue != '') {\n        inputValue = this.defaultValue;\n      }\n\n      var results = fuzzysort.go(inputValue, data, {\n        keys: this.options.keys,\n        limit: this.options.limit,\n        allowTypo: this.options.allowTypo,\n        threshold: this.options.threshold\n      });\n\n      for (var key in results) {\n        if (key < results.length) {\n          document.querySelectorAll(this.results)[0].appendChild(this.createElementFromHTML(this.template(results[key].obj)));\n        }\n\n        ;\n      }\n\n      this.on.afterDisplay(results);\n      this.defaultValue = '';\n    }\n  }, {\n    key: \"search\",\n    value: function search(data) {\n      var _this3 = this;\n\n      this.on.afterFetch(data);\n      this.check = true;\n\n      if (this.defaultValue != '') {\n        this.on.beforeDisplay();\n        this.displayResults(data);\n      }\n\n      if (this.button != '') {\n        var button = document.querySelectorAll(this.button)[0];\n\n        if (button.tagName == 'INPUT' && button.type == 'submit') {\n          button.closest('form').addEventListener(\"submit\", function (e) {\n            e.preventDefault();\n          });\n        }\n\n        ;\n        button.addEventListener('click', function (e) {\n          e.preventDefault();\n\n          _this3.on.beforeDisplay();\n\n          _this3.displayResults(data);\n        });\n      } else {\n        document.querySelectorAll(this.input)[0].addEventListener('keyup', function (e) {\n          _this3.on.beforeDisplay();\n\n          _this3.displayResults(data);\n        });\n      }\n\n      ;\n    }\n  }, {\n    key: \"checkArgs\",\n    value: function checkArgs() {\n      if (!document.querySelectorAll(this.input).length) {\n        console.log('Input not found.');\n        return false;\n      }\n\n      if (!document.querySelectorAll(this.results).length) {\n        console.log('Results not found.');\n        return false;\n      }\n\n      ;\n\n      if (this.button != '') {\n        if (!document.querySelectorAll(this.button).length) {\n          console.log('Button not found.');\n          return false;\n        }\n\n        ;\n      }\n\n      if (this.url == '') {\n        console.log('Content API Client Library host missing. Please set the host. Must not end in a trailing slash.');\n        return false;\n      }\n\n      ;\n\n      if (this.key == '') {\n        console.log('Content API Client Library key missing. Please set the key. Hex string copied from the \"Integrations\" screen in Ghost Admin.');\n        return false;\n      }\n\n      ;\n      return true;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      if (!this.checkArgs()) {\n        return false;\n      }\n\n      ;\n      return true;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this4 = this;\n\n      if (!this.validate()) {\n        return;\n      }\n\n      if (this.defaultValue != '') {\n        document.querySelectorAll(this.input)[0].value = this.defaultValue;\n\n        window.onload = function () {\n          if (!_this4.check) {\n            _this4.fetch();\n          }\n\n          ;\n        };\n      }\n\n      if (this.trigger == 'focus') {\n        document.querySelectorAll(this.input)[0].addEventListener('focus', function (e) {\n          if (!_this4.check) {\n            _this4.fetch();\n          }\n\n          ;\n        });\n      } else if (this.trigger == 'load') {\n        window.onload = function () {\n          if (!_this4.check) {\n            _this4.fetch();\n          }\n\n          ;\n        };\n      }\n    }\n  }]);\n\n  return GhostSearch;\n}();"],"file":"ghost-search.min.js"}